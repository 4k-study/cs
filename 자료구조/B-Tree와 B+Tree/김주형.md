# B Tree (Balanced Tree)

- 데이터 베이스와 파일 시스템에서 많이 사용되는 자료 구조
- 균형 이진 탐색 트리를 확장해 하나의 노드가 가질 수 있는 자
식 노드의 최대 숫자가 2보다 큰 균형 M 진 탐색 트리입니다.

## 장점

- 이진 트리에 비해 노드가 하나 이상의 데이터를 가질 수 있다.
- 이진 트리에 비해, 조회 성능이 좋다.
    
    → B Tree의 경우도 이진 탐색 트리와 마찬가지로 검색 성능이 높이에 비례한다.
    
    ⇒ 자식을 2개 보다 많이 가질 수 있게 되어, 그 만큼 높이가 줄어 들게 되므로 
    이진 탐색 트리보다 검색 성능이 향상 
    

## B 트리 조건

- M차 B-Tree라면, 루프 노드와 리프 노드를 제외하고 
최소 M/2개 이상, 최대 M - 1개의 데이터를 가질 수 있다.
- 노드 안의 데이터는 키 값의 크기에 따라, 정렬되어 있어야 한다.
- 자식 노드의 데이터는 부모의 데이터 값에 따라 배치된다.
→ 왼쪽 서브 트리에는 부모 노드의 가장 작은 키값보다 작은 키 값들이, 
중간 서브 트리에는 부모 노드들의 사잇 키값들이
오른쪽 서브 트리는 부모 노드들의 가장 큰 값 보다 큰 키값들이 들어간다.

- 노드 안에 K개의 데이터가 있다면 자식 노드 수는 K + 1개여야 한다.
- 루프 노드나 리프 노드가 아닌 경우 항상 2개 이상의 자식을 갖는다.
- 모든 리프 노드의 높이가 같아야 한다.
- 리프 노드의 데이터 수는 M - 1개 이하여야 한다.

# B+Tree

- B - Tree 트리를 개선하여 나온 트리
- B-Tree의 경우 데이터를 차례로 탐색하기 불편하다.
→ 데이터를 순차 탐색 하기 위해서는 모든 노드를 다 방문해야 한다.
- 리프 노드에만 데이터가 존재하고, 다른 노드들에는 키 값만 존재한다.
- 리프 노드들은 연결 리스트로 이어져 있다.

| 구분 | B-tree | B+tree |
| --- | --- | --- |
| 데이터 저장 | 리프 노드, 브랜치 노드 모두 데이터 저장 가능 | 오직 리프 노드에만 데이터 저장 가능 |
| 트리의 높이 | B+tree에 비해 높음 | B-tree에 비해 낮음 (한 노드 당 key를 많이 담을 수 있음) |
| 순차 탐색 방법 | 모든 노드 탐색 | 리프 노드에서 선형 탐색 |
| 키 중복 | 없음 | 있음 (리프 노드에 모든 데이터가 있기 때문) |
| 검색 | 자주 access 되는 노드를 루트 노드 가까이 배치할 수 있고, 루트 노드에서 가까울 경우, 브랜치 노드에도 데이터가 존재하기 때문에 빠름 | 리프 노드까지 가야 데이터 존재 |
| 링크드 리스트 | 없음 | 리프 노드끼리 링크드 리스트로 연결 |

## B+Tree 장점

- B-Tree에 비해 순차 탐색이 빠르다.
- 하나의 노드에 더 많은 키 값을 담을 수 있어, B-Tree에 비해 조회 성능이 좋다.
