# static이란?

스태틱 키워드는 고정된이라는 의미를가지고 있으며 정적 변수와 정적 메서드를 만들 수 있습니다.

해당 키워드를 가지고 만들어진 변수와 메서드는 프로그램 종료되기 전까지 사용할 수 있고 GC에 의해서 할당 해제가 되지 않습니다. (정적 객체는 GC에 의해 할당해제 가능합니다.)

정적 변수나 메서드를 가진 클래스는 정적 변수나 메서드에 접근하게 되면 인스턴스를 생성하지 않아도 메모리 상에 로딩되게 됩니다. 이런 정적 변수는 java 8버전 이후로 힙 영역에서 관리합니다. (이전에는 메서드 영역 내의 permanent 영역에서 관리됨.)

### Permanent 영역에 사라진 이유

각종 클래스 메타 데이터인 클래스, 메서드 및 필드에 대한 정보를 힙 영역에서 관리하다 보니까 힙 영역에 들어간 데이터의 사이즈 계산이 어려워 OOM이 자주 발생했고 그래서 클래스 메타 데이터를 네이티브 영역에서 관리하고 정적 변수만 힙 영역에서 관리하게 된 것입니다.

### GC

참조를 잃은 정적 객체는 GC의 대상이 됩니다. 하지만 primitive 타입의 정적 변수라면 프로그램 종료 전까지 살아남게 됩니다.

### Static을 지양해야 하는 이유

- 메모리 문제
    - 프로그램 실행 시점에 할당되어 웬만하면 종료 시점까지 메모리에서 해제되지 않습니다. (언밀히 말하면 static을 사용하는 시점)
- 동시성 이슈 문제
    - 전역으로 접근이 가능하기에 별도의 동기화 전략을 사용해야 합니다.
- 런타임 다형성 불가
    - static으로만 이루어진 메서드를 사용하는 객체의 경우 해당 객체를 인스턴스화 하는 것이 아니라 객체 메서드로 바로 접근하여 호출하기에 다형성을 이용할 수 없습니다.
- 객체의 상태를 이용할 수 없다.
- 테스트가 어렵습니다.
    - 전역으로 관리되어 프로그램 전체에 의해서 상태가 변경될 수 있어 추론하기가 어렵습니다.

### Static을 사용해도 좋은 경우

- 상수 정의를 하면 메모리를 아낄 수 있습니다. → static final의 경우 heap 영역이 아니라 method 영역에 로딩됨.
- 유틸리티 클래스를 정의할 때 사용합니다. 이는 애초에 객체의 상태를 이용하지 않고 여러 객체들의 필요에 의해서 데이터를 처리하는 공통 로직을 만들기에 유용합니다.
