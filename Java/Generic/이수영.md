# 제네릭이란?

클래스 내부에서 사용할 데이터 타입을 외부에서 지정하는 기법을 의미합니다. 

간단한 예시로써 자료구조를 사용할 때 많이 볼 수 있습니다. 특정 자료구조 사용시 꺽쇠 표시와 함께 특정 데이터 타입을 명시하여서 리스트 자료형의 데이터 타입을 지정합니다. 이 때 꺽쇠 괄호를 이용하여 데이터 타입을 외부에서 지정하는 방식이 제네릭입니다.

클래스에 타입 변수를 이용하여 내부에 존재하는 메소드의 매개변수나 자료형의 타입을 구체적으로 설정할 수 있습니다. 이를 구체화라고 부릅니다.

# 제네릭 사용 이유와 이점

1. 컴파일 타임에 타입 검사를 통해 예외 방지를 합니다.
    
    : jdk 1.5 전에 여러 타입을 다루기 위해선 Object 타입을 사용했는데 Object로 선언 시 반환된 Object 객체를 다시 원하는 타입으로 일일히 타입 변환할 필요가 있고 런타임 에러가 발생할 가능성이 존재합니다.
    
2. 불필요한 캐스팅을 없애서 성능 향상이 도모됩니다.
    
    : 기존처럼 동작 시 무조건 Object 배열 객체에 넣고 배열 요소를 꺼낼 때 다시 다운 캐스팅을 통해 가져와야했습니다. 이는 곧 추가적인 오버헤드가 발생하는 것입니다.
    
    반면, 제네릭은 미리 타입을 지정 & 제한하기 때문에 형 변환의 번거로움을 줄일 수 있으며 타입 검사에 들어가는 메모리를 줄일 수 있고 더불어 가독성이 좋아집니다.
    

# 제네릭 사용 주의사항

1. 제네릭 타입의 객체는 생성이 불가능합니다.
2. static 멤버에 제네릭 타입이 올 수 없습니다. 그 이유는 static은 미리 타입이 설정되어야 하는데 제네릭은 클래스가 생성되면서 외부에서 주입한 타입을 이용해야 하기 때문에 불가능합니다.
3. 제네릭 클래스 자체를 배열로 만들 수 없습니다.

# 와일드 카드

만약 제네릭 타입을 사용하고 싶지만, 들어오는 실제 타입 매개변수가 무엇인지 신경쓰고 싶지 않다면 와일드 카드를 사용해야합니다.

와일드카드는 <?>이고 이는 알 수 없는 타입(unknown type)을 의미하며 모든 타입이 될 수 있습니다.

### 제네릭 타입 <T>와 와일드 카드 <?>의 차이는?

- 제네릭 : 타입을 모르지만, 타입이 정해지면 그 타입의 특성에 맞게 사용합니다.
- 와일드 카드 : 무슨 타입인지 모르고, 무슨 타입인지 신경쓰지 않습니다. 타입을 확정하지 않고 가능성을 열어둡니다.

근데 만약 List<?> list 이렇게 이용해버리면 List 인터페이스에서 Object에 정의된 기능만(size(), clear())을 이용하고 특정 타입 파라미터와 결부된 add(), addall() 등을 이용하지 않겠다는 의미입니다. 그래서 null 이외의 어떤 원소도 Collection<?> 타입에 넣을 수도 없고 가져와도 타입을 알 수 없는 제약이 존재합니다.

이런 제약을 해결하기 위해서 제네릭 메서릭 메소드나 한정적 와일드카드 타입을 사용해야 합니다. 특정 타입을 지정하여 타입에 따른 메소드를 사용하고 싶다면 <T> 타입을 사용해야하고, <?>는 Object 타입으로 작동합니다.

### 한정적 와일드카드

한정적 와일드카드에서 extends를 사용하면 get 했을 때는 상위 객체가 되겠지만 add 하기엔 파라미터에서 타입이 확신할 수 없으므로 불가하다.

```java
interface Drink {
}

class Coffee implements Drink {
}

class Milk implements Drink {
}

public class Test {
	public void test(List<? extends Drink> drinks) {
		final Drink drink = drinks.get(0); // 이건 가능함.
		drinks.add(new Coffee()); // 이게 안됨. -> ? extends Drink 이게 Coffee인지 알 수 없다. Milk일수도 있잖아.
	}

	public void test2(List<T extends Drink> drinks) {
		final Drink drink = drinks.get(0); // -> Drink가 될 수 있다.
		drinks.add(new Coffee()); // 가능하다. T를 특정 타입 파라미터로 Coffee로 특정할 수 있으니까
	}
```

- 위에서 ? extends Drink를 이용하는 방법을 상한제한이라고 말합니다.
- ? super Drink를 이용하는 방법을 하한제한이라고 말합니다.
