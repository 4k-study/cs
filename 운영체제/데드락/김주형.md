# 데드락(교착 상태) 이란?

프로세스들이 자신이 가진 자원은 내어 놓지 않으면서, 
서로가 가진 자원을 기다리게 되어, 무한 대기에 빠진 상태

# 데드락 발생 조건

- 상호 배제 (Mutual exclusion)
- 점유 대기 (Hold and wait)
- 비선점 (No preemption)
- 순환 대기 (Circular wait)

## 상호 배제

한 번에 한 개의 프로세스만이 공유자원을 사용할 수 있다.

## 점유 대기

자원을 점유하면서 다른 자원을 기다릴 수 있다.

## 비선점

이미 할당된 자원을 강제로 빼앗을 수 없다.

## 순환 대기(Circular Wait)

자원을 대기하는 프로세스 집합이 순환의 형태로 대기하고 있다.

# 데드락 처리 방법

- 예방 (Prevention)
- 회피 (Avoidance)
- 탐지&회복 (Detection and Recovery)
- 무시 (Ignorance)

## 예방

데드락 발생 조건 중 하나를 제거함으로서 데드락 발생을 예방하는 방법

- 자원의 상호 배제 조건 방지 : 한 번에 여러 프로세스가 공유 자원을 사용할 수 있게 한다.
    
    → 동기화 문제가 발생할 수 있다.
    
- 점유 대기 조건 방지 : 프로세스 실행에 필요한 모든 자원이 가용할 때 까지, 자원을 점유하지 않고, 실행을 보류한다.
- 비선점 조건 방지 : 프로세스에 이미 할당된 자원을 우선 순위가 높은 프로세스가 선점할 수 있게 한다.
- 순환 대기 조건 방지 : 사이클이 발생하지 않도록, 자원에 순서를 매겨 낮은 번호의 자원을 획득해야만 높은 번호의 자원을 획득 할 수 있게 하여 사이클 방법

시스템의 처리랑과 효율성을 감소시키고, Starvation이 발생할 수 있다.

## 회피

프로세스가 요구하는 자원을 할당한 후에도 
안정상태에 남아있는가를 확인하여 교착 상태를 회피하는 방법

안정상태란 
데드락이 발생되지 않으면서, 모든 프로세스에 자원을 할당할 수 있는 상태

## 탐지 & 회복

## 탐지

순환 형태로 대기하는 프로세스 집합이 있는지를 통해 데드락을 감지한다.

## 회복

### 1. 프로세스 중지

- 교착 상태에 있는 모든 프로세스 중지시킨다.
- 데드락이 해결될 때까지, 프로세스 한 개씩 중지시킨다.

### 2. 자원 선점

- 교착상태가 해결될 때 까지, 프로세스로부터 자원을 빼앗아 다른 프로세스에게 자원을 할당한다.

시스템이 데드락 발생을 계속 확인해야 하기 때문에, 오버헤드가 크다

## 무시

사용자가 데드락을 인식하고, 직접 프로세스를 중지하는 등의 방법을 통해 
해결 하도록 사용자에게 데드락 해결을 위임 한다.

데드락이 드물게 발생하기 때문에, 데드락을 해결 하기 위해 자원을 낭비 하지 않는다.

유닉스, 윈도우 등 대부분의 범용 운영체제가 채택하는 방식이다.
