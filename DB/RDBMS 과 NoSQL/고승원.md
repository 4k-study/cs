## RDB

- table로 이루어져있으며, 테이블간 관계로  표현한다.
- RDB는 스키마가 엄격하게 관리한다.
- 따라서 sql은 유연하지 않으며, 수직확장만 가능하다.
- 엄격하기 때문에 데이터 중복이 일어나지 않는다.
- 데이터간 관계 변경이 잦을 때 사용하기 좋다.

관계형 데이터 베이스의 특징

1. 데이터 무결성
    
    데이터의 전체적인 완전성, 정확성 및 일관성을 의미한다.
    
    - 완전성 : 데이터는 결측치, 빈값, 오류를 가지지 않아야 한다.
    - 정확성 : 저장된 데이터는 대상을 올바르게 나타내는 값을 가져야한다.
    - 일관성 : 데이터의 용어 정의 형식등 일관된 포맷을 가져야한다.
    
    무결성을 검증하기 위한 만족 요건은 위와 같다.
    
    1. 개체 무결성 : PK는 Not Null + Unique
    2. 참조 무결성 : FK는 NULL or 참조테이블의 pk 여야한다.
    3. 속성 무결성 : 속성값은 지정된 데이터 형식을 만족하는 값을 가져야한다.
    4. 키 무결성 : 하나의 테이블에는 적어도 하나의 키가 있어야 한다.
    5. 도메인 무결성 : 속성 값은 미리 정의된 도메인 범위 안의 값을 가져야함
    6. 사용자 정의 무결성 : 모든 데이터는 업무 규칙을 준수해야 한다.
    
2. 트랜잭션
    
    하나의 논리적 작업 단위를 구성하여 쪼갤 수 없는 업무 처리의 최소 단위를 말한다.
    
    트랜잭션의 무결성을 보장하기 위한 조건 ACID
    
    1. 원자성 (Atomicity) : 
    트랜잭션이 DB에 모두 반영되던지 모두 반영되지 않아야 한다.
    2. 일관성 (Consistency) : 
    트랜잭션이 완료되면 일관적인 DB상태를 유지해야 한다.
    3. 고립성 (Isolation) : 
    트랜잭션 수행시 다른 트랜잭션이 끼어들지 못하도록 한다.
    4. 지속성 (Durability) : 
    트랜잭션이 정상적으로 종료된 다음에는 영구적으로 DB에 결과가 반영되어야 한다.

## NoSQL

- NoSQL은 스키마가 없다.
- 스키마가 없기 때문에 유연성이 높고 수직, 수평 확장성이 열려있다.
- 데이터 중복이 일어난다.
- 잦은 읽기 연산과 적은 update연산이 있는 경우 사용하기 좋다.
- DB서버를 클러스팅하여 하나의 DB를 구성하기 때문에 막대한양의 데이터를 다루는 경우 사용하기 좋다.
- scale-up / scale-out 용이하다.

NoSQL 종류

- Key Value DB
    
    key : value 쌍으로 저장된다. (Riak, Vodemort, Tokyo)
    
- Wide Columnar Store
Colun Family 데이터 모델 사용 (HBase, Cassandra, ScyllaDB)
- Document DB
JSON, XML같은 컬렉션 모델 구조 (MongoDB, CoughDB)
- Graph DB
Nodes, Relationshio, Key-Value 채용 (Neo4j, OrientDB)

## 어느 상황에 쓰면 좋은지

1. RDB
    - 명확한 스키마를 사용하는 서비스
    - 무결성 덕분에 관계를 맺고있는 데이터가 자주 이루어지는 서비스
    
    → 전자상거래 금융서비스?
    
2. NoSQL
    - 정확한 데이터 구조를 알 수 없는 경우
    - DB의 변경 및 확장이 야기되는 경우
    
    → 많은 데이터를 다루는 SNS에 활용하기 



## CAP이론

CAP(Consistency, Availability, Partition To Lerance)

위의 일관성, 가용성, 분할 내구성 3가지 특성 중 3가지 모두 충족할 수 없다는 이론이다.

- Consistency : 
모든 데이터를 요청할 때 응답으로 가장 최신의 데이터를 리턴 하던지 실패하든지 한다는 것
- Availability : 
가용성은 모든 요청에 대해서 정상적인 응답을 한다는 것이다.
- 클러스터의 노드 일부에서 장애가 발생하더라도 READ와 WRITE등의 동작은 항상 성공적으로 리턴되어야 한다.
- Partition Tolerance : 
분할된 DB A, B의 instance가 장애가 생기더라도 A또는 B DB에서 쿼리를 수행할 수 있다.
