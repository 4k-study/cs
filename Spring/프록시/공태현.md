## JDK Dynamic Proxy

JDK 동적 프록시(JDK dynamic proxy)는 자바 개발 키트(Java Development Kit, JDK)에서 제공하는 기능으로, 자바의 리플렉션(reflection)을 활용하여 동적으로 프록시 객체를 생성하는 기술입니다. JDK 동적 프록시는 인터페이스를 구현한 클래스에 대해서만 프록시를 생성할 수 있습니다.

### 특징

- 런타임에 프록시 생성하여 프록시를 필요로 하는 시점에서 생성할 수 있고, 동적으로 프록시의 동작을 변경할 수 있는 유연성을 제공합니다.

### 한계

- 프록시를 적용하기 위해서 반드시 인터페이스를 생성해야 함
- 구체 클래스로는 빈을 주입받을 수 없고, 반드시 인터페이스로만 주입받아야 함

## CGLIB Proxy

CGLIB(Class Generation Library)은 자바의 다이나믹 프록시(Dynamic Proxy) 구현 중 하나로, 클래스의 서브 클래스를 생성하여 프록시 객체를 만드는 라이브러리입니다. JDK 동적 프록시와 달리, CGLIB은 인터페이스를 구현하지 않은 클래스에 대해서도 프록시를 생성할 수 있습니다.

### 특징

1. 클래스 확장: CGLIB은 원본 클래스를 상속한 서브 클래스를 생성하여 프록시 객체를 만듭니다. 이렇게 생성된 서브 클래스는 원본 클래스의 모든 기능을 상속받고, 프록시의 부가 기능을 추가할 수 있습니다.
2. 바이트 코드 조작: CGLIB은 바이트 코드 조작 기술을 사용하여 생성된 서브 클래스의 바이트 코드를 수정합니다. 이를 통해 프록시 객체가 원본 객체의 메서드 호출을 가로채고 부가 동작을 수행할 수 있게 됩니다.
3. 인터페이스 구현 없이 프록시 생성: CGLIB은 인터페이스를 구현하지 않은 클래스에 대해서도 프록시를 생성할 수 있습니다. 이는 JDK 동적 프록시의 제약사항을 극복할 수 있게 합니다.
4. 런타임 성능: CGLIB은 런타임에 클래스를 동적으로 생성하고 수정하는 작업을 수행합니다. 이는 초기 프록시 생성에는 일부 오버헤드가 발생할 수 있지만, 런타임 성능은 일반적으로 빠릅니다. CGLIB은 프록시 생성 후에는 기본적으로 캐싱하여 성능을 향상시킵니다.
5. CGLib은 원래 외부 라이브러리이지만 스프링이 3.2부터 이를 내장시켰다.

### 한계

- 기본 생성자를 필요로 하며, 생성자가 2번 호출되고 final 클래스나 final 메소드면 안된다는 제약이 있다.
    - → CGLib은 원래 외부 라이브러리이지만 스프링이 3.2부터 이를 내장시켰다. 그리고 objenesis라는 특별한 라이브러리를 사용해 기본 생성자 없이 객체 생성이 가능하며 생성자가 2번 호출되는 문제 역시 해결하여 스프링 4.0에서 발전시켰다. 그리고 이제 더 이상 final을 제외한 CGLib의 한계점이 존재하지 않으니 스프링 부트 2.0에서는 기본값으로 설정해둔 것이다.
