## 정의

<aside>
💡 영속성 컨텍스트를 뷰까지 열어두는 것

</aside>

## 스프링에서 제공하는 OSIV

<aside>
💡 비즈니스 계층에서 트랜잭션을 시작하는 OSIV

</aside>

1. 클라이언트 요청이 들어오면 필터나 인터셉터에서 영속성 컨텍스트를 생성한다. (트랜잭션은 시작하지 않는다.)
2. 서비스 계층에서 `@Transactional`로 트랜잭션을 시작할 때 미리 생성해둔 영속성 컨텍스트를 찾아와서 트랜잭션을 시작한다.
3. 서비스 계층이 끝나면 트랜잭션을 커밋하고 영속성 컨텍스트를 플러시한다.(영속성 컨텍스트는 종료하지 않는다.)
4. 필터나 인터셉터로 요청이 돌아오면 영속성 컨텍스트를 종료한다.

### 특징

- 영속성 컨텍스트를 프리젠테이션 계층까지 유지한다.
- 프리젠테이션 계층에는 트랜잭션이 없으므로 엔티티를 수정할 수 없다.
- 프리젠테이션 계층에는 트랜잭션이 없지만 트랜잭션 없이 읽기를 사용해서 지연 로딩을 할 수 있다.

### 주의사항

- 프리젠테이션 계층에서 엔티티를 수정한 뒤에 트랜잭션을 시작하는 메소드를 호출하면 변경사항이 반영될 수 있다.
- 영속성 컨텍스트를 여러 트랜잭셔이 공유할 수 있다.
